{
  "hash": "d016d2ecfff882b116cfede60f1629c5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Making Maps with `ggplot`\"\n---\n\n\n## Call the libraries {#sec-ggplot-map}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(ggplot2) # beautiful graphs\n\nlibrary(dplyr) # data wrangling\n\nlibrary(sf) # simple (spatial) features\n\nlibrary(readr) # import csv\n```\n:::\n\n\n## Use `read_sf` To Open Shapefiles\n\n> Getting the directory and filename right is important.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ncity_boundary <- read_sf(\"./shapefiles/AA_City_Boundary/AA_City_Boundary.shp\")\n\nbuildings <- read_sf(\"./shapefiles/AA_Building_Footprints/AA_Building_Footprints.shp\")\n\ntrees <- read_sf(\"./shapefiles/a2trees/AA_Trees.shp\")\n\nparks <- read_sf(\"./shapefiles/AA_Parks/AA_Parks.shp\")\n\nuniversity <- read_sf(\"./shapefiles/AA_University/AA_University.shp\")\n\nWashtenawRoads <- read_sf(\"./shapefiles/Roads/RoadCenterlines.shp\")\n\nAnnArborRoads <- st_crop(WashtenawRoads, \n                         city_boundary) # crop to only get A2 roads\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: attribute variables are assumed to be spatially constant throughout\nall geometries\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\"}\n# watersheds <- read_sf(\"../shapefiles/watersheds/Watersheds.shp\")\n```\n:::\n\n\n\n## Use `ggplot` to Make The Map\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# NB RE Macs: the plotting device on Macs can be very slow\n# we notice this with all the detail that is involved in maps\n# maps can be REALLY slow on Macs\n# so--inconveniently--we write directly to PDF on a Mac\n# and don't see the graph in our RStudio window\n# we have to manually open the PDF to see the created map\n\n# Apparently, the first layer is important for setting the CRS of the map\n\n# pdf(\"./mapping/ggplot-map-test.pdf\") # open PDF device (uncomment on Mac)\n\n# dev.off() # turn off PDF device (uncomment on Mac)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(city_boundary) +\n  # geom_sf(data = buildings,\n  #         fill = \"lightgrey\") +\n  geom_sf(data = AnnArborRoads, \n          color = \"lightgrey\") +\n  geom_sf(color = \"darkgrey\", alpha = .5) +\n  geom_sf(data = university, \n          fill = \"blue\", \n          alpha = .25) + \n  geom_sf(data = parks, \n          fill = \"darkgreen\", \n          alpha = .25) +\n  # geom_sf(data = trees, \n  #         size = .1,\n  #         color = \"darkgreen\") +\n  labs(title = \"Ann Arbor\") +\n  scale_color_viridis_d() +\n  scale_fill_viridis_d() +\n  theme_minimal() +\n  theme(plot.title = element_text(size = rel(2)), \n        axis.text = element_text(size = rel(.5)),\n        legend.position = \"bottom\") \n```\n\n::: {.cell-output-display}\n![](ggplot-map_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "ggplot-map_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}