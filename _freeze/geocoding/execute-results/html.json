{
  "hash": "98477482cdcb563f16e982c5bb8466f8",
  "result": {
    "engine": "knitr",
    "markdown": "# Geocoding {#sec-geocoding}\n\n## Call Libraries\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidygeocoder) # geocoding\n\nlibrary(dplyr) # for %>% operator\n\nlibrary(readr) # import CSV\n\nlibrary(DT) # nice tables\n```\n:::\n\n\n\n\n## Get Data To Be Geocoded\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsimulated_address_data <- read_csv(\"simulated-address-data/simulated-address-data.csv\")\n\nDT::datatable(simulated_address_data,\n              extensions = 'Buttons', \n              options = list(\n                dom = 'Bfrtip',\n                buttons = c('copy', \n                            'csv', \n                            'print'))) # nice table\n```\n:::\n\n\n\n\n## Concatenate Addresses\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsimulated_address_data$address <- paste(simulated_address_data$street,\n                                        \", \",\n                                        simulated_address_data$city,\n                                        \", \",\n                                        simulated_address_data$state)\n\nDT::datatable(simulated_address_data,\n              extensions = 'Buttons', \n              options = list(\n                dom = 'Bfrtip',\n                buttons = c('copy', \n                            'csv', \n                            'print'))) # nice table\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-bdbe94822bda9f611cbf\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-bdbe94822bda9f611cbf\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"extensions\":[\"Buttons\"],\"data\":[[\"1\",\"2\",\"3\"],[\"Agency X\",\"Agency Y\",\"Agency Z\"],[42.1234,null,null],[-84.12341000000001,null,null],[\"123 Main STreet\",\"456 Main Street\",null],[\"Ann Arbor\",\"Ann Arbor\",null],[\"MI\",\"MI\",null],[\"123 Main STreet ,  Ann Arbor ,  MI\",\"456 Main Street ,  Ann Arbor ,  MI\",\"NA ,  NA ,  NA\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>agency<\\/th>\\n      <th>lat <\\/th>\\n      <th>lon<\\/th>\\n      <th>street<\\/th>\\n      <th>city<\\/th>\\n      <th>state<\\/th>\\n      <th>address<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"Bfrtip\",\"buttons\":[\"copy\",\"csv\",\"print\"],\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,3]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n## Geocode\n\n::: {.callout-caution}\nArcGIS geocoding has LOW success rate with this data. You will want to find a process with HIGH success rate.\n:::\n\n::: {.callout-tip}\nYou could also try batchgeo -> KML -> Latitude/Longitude\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ngeocoded_data <- simulated_address_data %>% \n  tidygeocoder::geocode(address, \n                        method = 'arcgis', \n                        lat = latitude, \n                        long = longitude)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nPassing 3 addresses to the ArcGIS single address geocoder\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nQuery completed in: 1.6 seconds\n```\n\n\n:::\n\n```{.r .cell-code  code-fold=\"true\"}\nDT::datatable(geocoded_data,\n              extensions = 'Buttons', \n              options = list(\n                dom = 'Bfrtip',\n                buttons = c('copy', \n                            'csv', \n                            'print'))) # nice table\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-4bce564e6d7a5aee572f\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-4bce564e6d7a5aee572f\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"extensions\":[\"Buttons\"],\"data\":[[\"1\",\"2\",\"3\"],[\"Agency X\",\"Agency Y\",\"Agency Z\"],[42.1234,null,null],[-84.12341000000001,null,null],[\"123 Main STreet\",\"456 Main Street\",null],[\"Ann Arbor\",\"Ann Arbor\",null],[\"MI\",\"MI\",null],[\"123 Main STreet ,  Ann Arbor ,  MI\",\"456 Main Street ,  Ann Arbor ,  MI\",\"NA ,  NA ,  NA\"],[42.282092990238,42.284721491138,-22.138976122],[-83.748534338098,-83.748250048103,17.221498984]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>agency<\\/th>\\n      <th>lat <\\/th>\\n      <th>lon<\\/th>\\n      <th>street<\\/th>\\n      <th>city<\\/th>\\n      <th>state<\\/th>\\n      <th>address<\\/th>\\n      <th>latitude<\\/th>\\n      <th>longitude<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"dom\":\"Bfrtip\",\"buttons\":[\"copy\",\"csv\",\"print\"],\"columnDefs\":[{\"className\":\"dt-right\",\"targets\":[2,3,8,9]},{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n::: {.callout-important title=\"Geocoding Can Make Errors!\"}\nNB that for whatever reason--perhaps because there is no address information--the geocoder has made a mistake: Agency Z has been placed in the Southern Hemisphere. Geocoding can be an error prone process and requires careful inspection of your tabular and mapped data.\n\nA geocoder may also be unable to geocode some of your data. Low success rates are not uncommon, and you may have to work hard to ensure that the majority, or all, of your data are geocoded.\n:::\n\n> Geocoded data can then be mapped using procedures outlined in @sec-location-data.\n\n\n\n",
    "supporting": [
      "geocoding_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<link href=\"site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/datatables-binding-0.30/datatables.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/dt-core-1.13.4/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/dt-core-1.13.4/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-core-1.13.4/js/jquery.dataTables.min.js\"></script>\n<link href=\"site_libs/dt-ext-buttons-1.13.4/css/buttons.dataTables.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/dt-ext-buttons-1.13.4/js/dataTables.buttons.min.js\"></script>\n<script src=\"site_libs/dt-ext-buttons-1.13.4/js/buttons.html5.min.js\"></script>\n<script src=\"site_libs/dt-ext-buttons-1.13.4/js/buttons.colVis.min.js\"></script>\n<script src=\"site_libs/dt-ext-buttons-1.13.4/js/buttons.print.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}